(()=>{"use strict";var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{initChallenges:()=>p,runChallenge:()=>d,setUserId:()=>h});const t=e=>new Promise((r=>setTimeout(r,e))),n=()=>{};var o=(e,r,t)=>new Promise(((n,o)=>{var i=e=>{try{s(t.next(e))}catch(e){o(e)}},l=e=>{try{s(t.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,l);s((t=t.apply(e,r)).next())}));function i(e,r,t){return o(this,null,(function*(){let n=null;const o=new Promise((e=>{n=setTimeout((()=>{setTimeout((()=>{e(null)}),100)}),r)})),i=yield Promise.race([e,o]);if(n&&clearTimeout(n),!i)throw new Error(t);return i}))}const l=function(e){return new Promise((function(r,t){let n=0;e.forEach((o=>{o.then(r).catch((function(r){++n===e.length&&t(r)}))}))}))};function s(){let e=n,r=n;return{promise:new Promise(((t,n)=>{e=t,r=n})),resolve:e,reject:r}}const a=()=>{let e=s(),r=e.resolve,t=e.reject;const n=()=>{r=null,t=null},o={current:e.promise,busy:()=>{r||(e=s(),o.current=e.promise,r=e.resolve,t=e.reject)},ready:e=>{r&&r(e),n()},failed:()=>{t&&t(),n()}};return o},c="https://verify.botbye.com",{initChallenges:u,runChallenge:d,setUserId:h}=(e=>{const r=Date.now(),s={api:a(),load:a(),init:a()},c=e=>()=>s[e].current,u=c("api"),d=c("init"),h=c("load"),p=()=>h().then(u),m=t=>{let n=0;return()=>{return o=function*(){++n;const o=Date.now();return(yield function(e){const r=String(Math.random()).replace("0.",""),t="__prt__"+r;window[t]={};const n=document.createElement("script");n.src=e,n.dataset.id=r,n.async=!0,document.body.append(n);const o=()=>{n.remove(),delete window[t]};return new Promise(((e,r)=>{n.onload=()=>{if(!window[t].r||"function"!=typeof window[t].r)return r(new Error("Not valid script loaded")),void o();e(window[t].r),o()},n.onerror=()=>{o(),r(new Error("Script load error"))}}))}((e||t.url)+"/client/v1.js")).bind(null,{s:o,r:n,i:r})},new Promise(((e,r)=>{var t=e=>{try{i(o.next(e))}catch(e){r(e)}},n=e=>{try{i(o.throw(e))}catch(e){r(e)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(t,n);i((o=o.apply(undefined,null)).next())}));var o}},y=e=>{(function(e,r,n,s){return o(this,null,(function*(){const n=[];for(let o=0;o<r;o++)try{return n.push(e()),yield i(l(n),3e3,s)}catch(e){if(o===r-1)throw e;yield t(100)}throw new Error(s+` (${r} attempts)`)}))})(m(e),e.reload?1:3,0,"Timeout").then((e=>r=>{e.reload&&(s.init.busy(),s.api.busy());const t=r();return s.api.ready(t),s.load.ready(),!0})(e)).catch((e=>r=>{const t=r instanceof Error?r.message:"UNKNOWN";s.api.ready((e=>{const r=()=>Promise.resolve(e);return{setUserId:n,runCaptcha:()=>({dispose:n,promise:Promise.reject()}),runChallenge:r,initChallenges:()=>Promise.resolve(r)}})(`[Error] Main script load error ${t}`)),s.init.ready(),setTimeout((()=>{e.reload=!0,y(e)}),5e3)})(e))},f=(()=>{let e=!0;return(...r)=>{e&&(e=!1,(e=>{((e,r)=>{const t=document.createElement("link");t.rel="preload",t.as=r,t.href=e,document.head.appendChild(t)})(e.url+"/challenges/v2/"+e.siteKey,"script"),y({url:e.url,reload:!1}),(e=>{p().then((r=>r.initChallenges(e))).then((()=>s.init.ready()))})(e)})(...r))}})(),w=e=>d().then(u).then((r=>r.runChallenge(e)));return{initChallenges:e=>(f(e),u().then((()=>w))),runChallenge:w,runCaptcha:e=>{const r=p().then((({runCaptcha:r})=>r(e)));return{dispose:()=>{r.then((e=>e.dispose()))},promise:r.then((e=>e.promise))}},setUserId:e=>{p().then((r=>r.setUserId(e)))}}})(c),p=e=>u(Object.assign({url:e.api||c,siteKey:e.clientKey},e));var m=exports;for(var y in r)m[y]=r[y];r.__esModule&&Object.defineProperty(m,"__esModule",{value:!0})})();