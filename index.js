(()=>{"use strict";var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{initChallenges:()=>f,runChallenge:()=>y,setUserId:()=>m});const t=e=>new Promise((r=>setTimeout(r,e))),n=()=>{};var o=(e,r,t)=>new Promise(((n,o)=>{var i=e=>{try{s(t.next(e))}catch(e){o(e)}},l=e=>{try{s(t.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,l);s((t=t.apply(e,r)).next())}));const i="__prt__",l=i+"preload__runners_controller";function s(e,r,t){return o(this,null,(function*(){let n=null;const o=new Promise((e=>{n=setTimeout((()=>{setTimeout((()=>{e(null)}),100)}),r)})),i=yield Promise.race([e,o]);if(n&&clearTimeout(n),!i)throw new Error(t);return i}))}const a=function(e){return new Promise((function(r,t){let n=0;e.forEach((o=>{o.then(r).catch((function(r){++n===e.length&&t(r)}))}))}))};function c(){let e=n,r=n;return{promise:new Promise(((t,n)=>{e=t,r=n})),resolve:e,reject:r}}const u=()=>{let e=c(),r=e.resolve,t=e.reject;const n=()=>{r=null,t=null},o={current:e.promise,busy:()=>{r||(e=c(),o.current=e.promise,r=e.resolve,t=e.reject)},ready:e=>{r&&r(e),n()},failed:()=>{t&&t(),n()}};return o},d=e=>({then:r=>{if(r){const t=r(e);return t&&"function"==typeof t.then?t:d(t)}return d(e)}}),h="https://verify.botbye.com",{initChallenges:p,runChallenge:y,setUserId:m}=(e=>{const r=Date.now(),c={api:u(),load:u(),init:u()},h=e=>()=>c[e].current;let p=h("api"),y=h("init");const m=h("load");let f=()=>m().then(p);const v=t=>{let n=0;return()=>{return o=function*(){++n;const o=Date.now();return(yield function(e){const r=String(Math.random()).replace("0.",""),t=i+r;window[t]={};const n=document.createElement("script");n.src=e,n.dataset.id=r,n.async=!0,document.body.append(n);const o=()=>{n.remove(),delete window[t]};return new Promise(((e,r)=>{n.onload=()=>{if(!window[t].r||"function"!=typeof window[t].r)return r(new Error("Not valid script loaded")),void o();e(window[t].r),o()},n.onerror=()=>{o(),r(new Error("Script load error"))}}))}((e||t.url)+"/client/v1.js")).bind(null,{s:o,r:n,i:r})},new Promise(((e,r)=>{var t=e=>{try{i(o.next(e))}catch(e){r(e)}},n=e=>{try{i(o.throw(e))}catch(e){r(e)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(t,n);i((o=o.apply(undefined,null)).next())}));var o}},w=e=>{(e=>{const r=document.createElement("link");r.rel="preload",r.as="script",r.href=e,document.head.appendChild(r)})(e.url+"/challenges/v2/"+e.siteKey),function(e,r,n,i){return o(this,null,(function*(){const n=[];for(let o=0;o<r;o++)try{return n.push(e()),yield s(a(n),3e3,i)}catch(e){if(o===r-1)throw e;yield t(100)}throw new Error(i+" ("+r+" attempts)")}))}(v(e),e.reload?1:3,0,"Timeout").then((e=>r=>{e.reload&&(c.init.busy(),c.api.busy());const t=r();return f=()=>d(t),p=()=>d(t),c.api.ready(t),c.load.ready(),!0})(e)).catch((e=>r=>{const t=r instanceof Error?r.message:"UNKNOWN";c.api.ready((e=>{const r=()=>Promise.resolve(e);return{setUserId:n,runCaptcha:()=>({dispose:n,promise:Promise.reject()}),runChallenge:r,initChallenges:()=>Promise.resolve(r)}})("[Error] Main script load error"+t)),c.init.ready(),setTimeout((()=>{e.reload=!0,g(e)}),5e3)})(e))},g=e=>{const t=window[l];if(t&&"function"==typeof t.r){const e=t.r({s:Date.now(),r:0,i:r});return f=()=>d(e),y=()=>d(void 0),p=()=>d(e),c.api.ready(e),c.init.ready(),void c.load.ready()}w(e)},P=(()=>{let e=!0;return(...r)=>{e&&(e=!1,(e=>{g({url:e.url,reload:!1,siteKey:e.siteKey}),(e=>{f().then((r=>r.initChallenges(e))).then((()=>{y=()=>d(void 0),c.init.ready()}))})(e)})(...r))}})(),b=e=>y().then(p).then((r=>r.runChallenge(e)));return{initChallenges:e=>(P(e),y().then((()=>b))),runChallenge:b,runCaptcha:e=>{const r=f().then((({runCaptcha:r})=>r(e)));return{dispose:()=>{r.then((e=>e.dispose()))},promise:r.then((e=>e.promise))}},setUserId:e=>{f().then((r=>r.setUserId(e)))}}})(h),f=e=>p(Object.assign({url:e.api||h,siteKey:e.clientKey,ver:"1.1.0"},e));var v=exports;for(var w in r)v[w]=r[w];r.__esModule&&Object.defineProperty(v,"__esModule",{value:!0})})();